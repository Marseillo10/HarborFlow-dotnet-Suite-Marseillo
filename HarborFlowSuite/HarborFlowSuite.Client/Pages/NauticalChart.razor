@page "/nautical-chart"

<PageTitle>Nautical Chart</PageTitle>

<MudContainer MaxWidth="@(_isFullScreen ? MaxWidth.False : MaxWidth.Large)" Class="@(_isFullScreen ? "pa-0 ma-0" : "mt-4")" Style="@(_isFullScreen ? "height: calc(100vh - var(--mud-appbar-height)); overflow: hidden;" : "")">
    @if (!_isFullScreen)
    {
            <MudText Typo="Typo.h4" Class="mb-4">Nautical Chart</MudText>
            <MudText Typo="Typo.body1" Class="mb-4">Explore the OpenSeaMap for detailed nautical information.</MudText>
    }

    <MudCard Elevation="@(_isFullScreen ? 0 : 4)" Class="@(_isFullScreen ? "rounded-0" : "glass-card rounded-xl overflow-hidden")" Style="@(_isFullScreen ? "height: 100%;" : "")">
        <MudCardContent Class="pa-0" Style="@(_isFullScreen ? "height: 100%;" : "")">
            <div style="@(_isFullScreen ? "width: 100%; height: 100%; position: relative;" : "width: 100%; height: 80vh; background-color: #f0f0f0; position: relative;")">
                <iframe src="https://map.openseamap.org/" style="width: 100%; height: 100%; border: none;"
                    loading="lazy" title="OpenSeaMap Nautical Chart"
                    sandbox="allow-scripts allow-same-origin allow-popups allow-forms" allowfullscreen
                    referrerpolicy="no-referrer">
                </iframe>

                <MudTooltip Text="@(_isFullScreen ? "Exit Full Screen" : "Full Screen")">
                    <MudIconButton Icon="@(_isFullScreen ? Icons.Material.Filled.FullscreenExit : Icons.Material.Filled.Fullscreen)" 
                                   Color="Color.Secondary" 
                                   OnClick="ToggleFullScreen"
                                   Class="absolute top-4 right-4 z-10 glass-button" 
                                   Style="position: absolute; top: 16px; right: 16px; z-index: 10;" />
                </MudTooltip>
            </div>
        </MudCardContent>
    </MudCard>
</MudContainer>

<style>
    .glass-card {
        background: rgba(30, 41, 59, 0.7) !important;
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .glass-button {
        background: rgba(30, 41, 59, 0.8) !important;
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .glass-button:hover {
        background: rgba(30, 41, 59, 0.95) !important;
    }
</style>

@code {
    private bool _isFullScreen = false;

    private void ToggleFullScreen()
    {
        _isFullScreen = !_isFullScreen;
    }
}
